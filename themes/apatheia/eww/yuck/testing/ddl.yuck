;; todo incluing ddl py script
(defpoll ddl_days :interval "2h" "exec ~/.config/hypr/themes/apatheia/eww/scripts/countdown.py 7/7/2023 JLPT N1 | awk 'NR==1'")
(defpoll ddl_event :interval "2h" "exec ~/.config/hypr/themes/apatheia/eww/scripts/countdown.py 7/7/2023 JLPT N1 | awk 'NR==2'")
; todo maybe I would create a revealer for ddl so that it could be multiple

(defvar ddl_reveal false)

(defwindow ddl
  :monitor 0
  ; :orientation "h"
  :exclusive false
  ; :focusable true
  :stackings "fg"
  :geometry (geometry
              :width "10%"
              :height "2%"
              :anchor "top left")
  :windowtype "dock"
  (ddl))
 

; (defwidget ddl []
;   (box
;     :class "bar_class"
;     :orientation "h"
;     :space-evenly "false"
;     (launcher)
;     (label :class "ddl_days" :text ddl_days)
;     ; (label :text " DAYS ")
;     (label :class "ddl_weeks" :text ddl_weeks)
;     ; (label :text " WEEKS ")
;     (label :class "ddl_left" :text " left for ")
;     (label
;       :class "ddl_event"
;       :text ddl_event)))

(defwidget ddl []
  (eventbox
      :onhover "${EWW_CMD} update ddl_reveal=true"
      :onhoverlost "${EWW_CMD} update ddl_reveal=false"
    (box
      :class "bar_class"
      :space-evenly false
      (revealer
        :transition "slidedown"
        :reveal ddl_reveal
        :duration "450ms"
        (box
          (launcher)

         (label :class "ddl_days" :text ddl_days)
    ; (label :text " DAYS ")
         (label :class "ddl_weeks" :text { (ddl_days - ddl_days % 7 ) / 7})
    ; (label :text " WEEKS ")
         (label :class "ddl_left" :text " left for ")
         (label
           :class "ddl_event"
           :text ddl_event))))))


          


       


      ; todo : checkbox
      ; (label
      ;        :text "x"
      ;        :limit-width 20
; )
      
